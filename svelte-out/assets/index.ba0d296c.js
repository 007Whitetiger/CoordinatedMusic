import{i as k,S as A,a as O,s as P,e as g,b as w,t as C,c,l as I,d as N,n as L,f as d,r as T,o as D,g as E}from"./vendor.a83b3289.js";const q=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const e of o)if(e.type==="childList")for(const r of e.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function f(o){const e={};return o.integrity&&(e.integrity=o.integrity),o.referrerpolicy&&(e.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?e.credentials="include":o.crossorigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function l(o){if(o.ep)return;o.ep=!0;const e=f(o);fetch(o.href,e)}};q();const S=k();function U(u){let s,f,l,o,e,r,i,b,p,y,m;return{c(){s=g("button"),s.textContent="Start",f=w(),l=C(u[1]),o=C(" - "),e=C(u[2]),r=w(),i=g("button"),i.textContent="stop",b=w(),p=g("div")},m(t,n){c(t,s,n),c(t,f,n),c(t,l,n),c(t,o,n),c(t,e,n),c(t,r,n),c(t,i,n),c(t,b,n),c(t,p,n),u[5](p),y||(m=[I(s,"click",u[3]),I(i,"click",u[4])],y=!0)},p(t,[n]){n&2&&N(l,t[1]),n&4&&N(e,t[2])},i:L,o:L,d(t){t&&d(s),t&&d(f),t&&d(l),t&&d(o),t&&d(e),t&&d(r),t&&d(i),t&&d(b),t&&d(p),u[5](null),y=!1,T(m)}}}function h(u,s,f){let l=!1,o=!1,e,r,i,b=0,p,y,m=0;D(()=>{e=new Audio("/static/clean-bandit.mp3"),e.load(),e.controls=!0,i.appendChild(e),S.on("connect",()=>{console.log("Connected to server!")});function v(a){b+=Math.abs(a-e.currentTime),m++;let _=Math.abs(a-e.currentTime);console.log("difference between server and client: "+_),(m<3&&_>=.3||m>3&&_>=.1)&&(console.log("UPDATING"),e.currentTime=a+b/m,f(1,p=a)),f(2,y=_)}S.on("broadcast_update",a=>{l&&(v(a),console.log("New difference from broadcast: "+a),o||(e.play(),o=!0))}),S.on("update",a=>{console.log("New difference: "+a),v(a)})});const t=()=>{l=!0,S.emit("start"),r=setInterval(()=>{!l||S.emit("update")},100),console.log("Started synchronised songs!")},n=()=>{o=!1,l=!1,clearInterval(r),e.pause(),console.log("Stopped synchronised songs!")};function M(v){E[v?"unshift":"push"](()=>{i=v,f(0,i)})}return[i,p,y,t,n,M]}class j extends A{constructor(s){super();O(this,s,h,U,P,{})}}new j({target:document.getElementById("app")});
